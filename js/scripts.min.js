$(function(){function t(t){if(void 0!=t){var e=$("#"+t);$(".popout").not(document.getElementById(t)).removeClass("active"),e.hasClass("active")?e.removeClass("active"):e.addClass("active")}else $(".popout").removeClass("active")}function e(){1==localStorage.getItem("customwallpaper")?(d=1,$("#btn-customwallpaper").show(),$("#add-customwallpaper img").attr("src","img/check.svg")):(d=0,$("#btn-customwallpaper").hide(),$("#add-customwallpaper img").attr("src","img/uncheck.svg"))}function o(){1==localStorage.getItem("search")?(w=1,$(".search").fadeIn(),$("#add-search img").attr("src","img/check.svg"),$("#query").focus()):(w=0,$(".search").fadeOut(),$("#add-search img").attr("src","img/uncheck.svg"))}function r(){1==localStorage.getItem("countdowntimer")?(h=1,$("#btn-countdowntimer").show(),$("#add-countdowntimer img").attr("src","img/check.svg")):(h=0,$("#btn-countdowntimer").hide(),$("#add-countdowntimer img").attr("src","img/uncheck.svg"))}function a(){1==localStorage.getItem("lightfonts")?(g=1,$("body").addClass("light"),$("#add-lightfonts img").attr("src","img/check.svg")):(g=0,$("body").removeClass("light"),$("#add-lightfonts img").attr("src","img/uncheck.svg"))}function n(){if(1==localStorage.getItem("customwallpaper")&&null!=localStorage.getItem("customwallpaperurl")&&""!=localStorage.getItem("customwallpaperurl")){var t=new Image;t.src=localStorage.getItem("customwallpaperurl");var e=0;t.onload=function(){var o=document.createElement("canvas");o.width=1920,o.height=1080,document.body.appendChild(o);var r=o.getContext("2d");r.drawImage(t,0,0);for(var a=r.getImageData(0,0,o.width,o.height),n=a.data,c,i,l,s,u=0,m=n.length;m>u;u+=4)c=n[u],i=n[u+1],l=n[u+2],s=Math.floor((c+i+l)/3),e+=s;var d=Math.floor(e/(this.width*this.height));d>150?$("body").addClass("black"):$("body").removeClass("black"),$("body").css("background-image","url("+t.src+")"),$("#input-customwallpaper").val(t.src)}}else{var o;if(null===localStorage.getItem(p)){localStorage.removeItem(p);var t=new Image;t.crossOrigin="";var r=1e4*Math.random();t.src="https://unsplash.it/1920/1080/?random&element=body&version="+r;var e=0;t.onload=function(){var r=document.createElement("canvas");r.width=1920,r.height=1080,document.body.appendChild(r);var a=r.getContext("2d");a.drawImage(t,0,0);for(var n=a.getImageData(0,0,r.width,r.height),c=n.data,i,l,s,u,m=0,d=c.length;d>m;m+=4)i=c[m],l=c[m+1],s=c[m+2],u=Math.floor((i+l+s)/3),e+=u;var w=Math.floor(e/(this.width*this.height));w>150?$("body").addClass("black"):$("body").removeClass("black"),o=r.toDataURL("image/jpeg"),localStorage.setItem(p,o),$("body").css("background-image","url("+o+")"),$("#btn-refresh").delay(1e3).removeClass("rotating")}}else{var t=new Image;t.src=localStorage.getItem(p);var e=0;t.onload=function(){var o=document.createElement("canvas");o.width=1920,o.height=1080,document.body.appendChild(o);var r=o.getContext("2d");r.drawImage(t,0,0);for(var a=r.getImageData(0,0,o.width,o.height),n=a.data,c,i,l,s,u=0,m=n.length;m>u;u+=4)c=n[u],i=n[u+1],l=n[u+2],s=Math.floor((c+i+l)/3),e+=s;var d=Math.floor(e/(this.width*this.height));d>150?$("body").addClass("black"):$("body").removeClass("black"),$("body").css("background-image","url("+t.src+")"),$("#input-customwallpaper").val(t.src)}}}}function c(){if(null===k){var t=new Date,e=t.getHours(),o=t.getMinutes();0===f?(e%=12,e=e?e:12,e=0===e?"0"+e:e):e>12&&(e%=24,e=9>e?"0"+e:e),o=10>o?"0"+o:o;var r=e+":"+o;$(".clock h1").text(r),$(".widget.clock").fadeIn(1e3)}}function i(t){if("google"===t)return"https://google.com";if("facebook"===t)return"https://www.facebook.com";if("youtube"===t)return"https://www.youtube.com";if("yahoo"===t)return"https://yahoo.com";if("wiki"===t||"wikipedia"===t)return"http://wikipedia.org";if("twitter"===t)return"https://twitter.com";if("bing"===t)return"https://bing.com";if("pinterest"===t)return"https://www.pinterest.com";if("reddit"===t)return"https://www.reddit.com";if("wordpress"===t)return"https://wordpress.com";if("instagram"===t)return"https://instagram.com";if("tumblr"===t)return"https://www.tumblr.com";if("paypal"===t)return"https://www.paypal.com";if("imgur"===t)return"https://imgur.com";if("apple"===t)return"https://www.apple.com";if("microsoft"===t)return"https://www.microsoft.com";if("imdb"===t)return"https://www.imdb.com";if("stack overflow"===t)return"https://stackoverflow.com";if("craigslist"===t)return"http://craigslist.com";if("netflix"===t)return"https://www.netflix.com";if("bbc"===t)return"http://www.bbc.co.uk";if("cnn"===t)return"http://cnn.com";if("dropbox"===t)return"https://www.dropbox.com";if("github"===t)return"https://github.com";if("gmail"===t)return"http://mail.google.com";if("flickr"===t)return"https://www.flickr.com";if("yelp"===t)return"http://www.yelp.com";if("godaddy"===t)return"https://www.godaddy.com";if("vimeo"===t)return"https://vimeo.com";if("etsy"===t)return"https://www.etsy.com";if("cnet"===t)return"http://cnet.com";if("slideshare"===t)return"http://www.slideshare.com";if("deviantart"===t)return"http://www.deviantart.com";if("forbes"===t)return"http://www.forbes.com";if("twitch"===t)return"http://www.twitch.tv";if("soundcloud"===t)return"https://soundcloud.com";if("quora"===t)return"https://www.quora.com";if("mailchimp"===t)return"http://mailchimp.com";if("9gag"===t)return"http://9gag.com";if("lifehacker"===t)return"http://www.lifehacker.com";if("fiverr"===t)return"https://www.fiverr.com";if("gizmodo"===t)return"http://www.gizmodo.com";if("trello"===t)return"https://trello.com";if("evernote"===t)return"https://evernote.com";if("kickstarter"===t)return"https://www.kickstarter.com";if("outlook"===t)return"https://outlook.com";if("xe"===t)return"http://www.xe.com";var e=new RegExp(" ","g");return t=t.replace(e,"+"),"https://google.com/search?q="+t}function l(){s(),k=window.setInterval(u,1e3)}function s(){window.clearInterval(k),k=null,$(".clock h1").removeClass("flashing"),$("#btn-countdowntimer").removeClass("rotating"),I.pause()}function u(){if(b-=1,0>=b)return window.clearInterval(k),I.currentTime=0,I.play(),$(".clock h1").text("00:00").addClass("flashing"),void(y=window.setTimeout(s,5700));var t=Math.floor(b%31536e3%86400/3600),e=Math.floor(b%31536e3%86400%3600/60),o=b%31536e3%86400%3600%60;10>t&&(t="0"+t),10>e&&(e="0"+e),10>o&&(o="0"+o),$(".clock h1").text("00"===t?e+":"+o:t+":"+e+":"+o)}$(document).click(function(){t()}),$(".popout").click(function(t){t.stopPropagation()});var m=!1,d,w,h,g;$(document).mousemove(function(){$(".menu").addClass("active"),lastTimeMouseMoved=(new Date).getTime();var t=setTimeout(function(){var t=(new Date).getTime();m||$(".popout").hasClass("active")||t-lastTimeMouseMoved>1e3&&$(".menu").removeClass("active")},1e3)}),$(".icon img").each(function(){var t=$(this),e=t.attr("id"),o=t.attr("class"),r=t.attr("src");$.get(r,function(r){var a=$(r).find("svg");"undefined"!=typeof e&&(a=a.attr("id",e)),"undefined"!=typeof o&&(a=a.attr("class",o+" replaced-svg")),a=a.removeAttr("xmlns:a"),t.replaceWith(a)},"xml")}),$(".icon").hover(function(){m=!0},function(){m=!1}),$(".icon").click(function(t){t.stopPropagation()}),$("#btn-addons").click(function(e){t("addons"),e.preventDefault()}),$("#btn-about").click(function(e){t("about"),e.preventDefault()}),$("#add-customwallpaper").click(function(t){0===d?localStorage.setItem("customwallpaper",1):localStorage.setItem("customwallpaper",0),e(),t.preventDefault()}),e(),$("#add-search").click(function(t){0===w?localStorage.setItem("search",1):localStorage.setItem("search",0),o(),t.preventDefault()}),o(),$("#add-countdowntimer").click(function(t){0===h?localStorage.setItem("countdowntimer",1):localStorage.setItem("countdowntimer",0),r(),t.preventDefault()}),r(),$("#add-lightfonts").click(function(t){0===g?localStorage.setItem("lightfonts",1):localStorage.setItem("lightfonts",0),a(),t.preventDefault()}),a();var p=new Date;p=p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear(),n(),$("#btn-refresh").click(function(t){localStorage.setItem("customwallpaper",0),d=0,localStorage.removeItem(p),$(this).addClass("rotating"),n(),t.preventDefault()}),$("#btn-customwallpaper").click(function(e){t("customwallpaper"),$("#input-customwallpaper").focus(),e.preventDefault()}),$("#input-customwallpaper").keypress(function(t){13==t.keyCode&&(localStorage.setItem("customwallpaperurl",$(this).val()),n(),popover())});var f;f=1==localStorage.getItem("military")?1:0,c(),window.setInterval(c,100);var v={weekday:"long",year:"numeric",month:"long",day:"numeric"};$(".date h2").text((new Date).toLocaleDateString("en-GB",v)),$(".widget.date").fadeIn(1e3),$("#btn-clock").click(function(t){$(".widget.clock").stop(!0,!0).hide().fadeIn(500),1===f?(localStorage.setItem("military",0),f=0):(localStorage.setItem("military",1),f=1),c(),t.preventDefault()}),$("#query").val="",$("#query").keypress(function(t){13===t.keyCode&&(window.location=i($(this).val()))}),$("#btn-countdowntimer").click(function(e){t("countdown"),$("#input-countdown").focus(),e.preventDefault()});var b=0,k=null,y=null,I=document.getElementById("buzzer");$("#input-countdown").keypress(function(e){13===e.keyCode&&(isNaN($(this).val())||($(this).val()>86400?$("#countdown .error").text("Cannot countdown over 24 hours").show():$(this).val()<1?$("#countdown .error").text("Number must be positive").show():($("#countdown .error").hide(),window.clearTimeout(y),b=$(this).val(),l(),$("#btn-countdowntimer").addClass("rotating"),t())))})});