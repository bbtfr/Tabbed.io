function popout(t){if(void 0!=t){var e=$("#"+t);$(".popout").not(document.getElementById(t)).removeClass("active"),e.hasClass("active")?e.removeClass("active"):e.addClass("active")}else $(".popout").removeClass("active")}function b64toBlob(t,e,o){e=e||"",o=o||512;for(var a=atob(t),n=[],r=0;r<a.length;r+=o){for(var c=a.slice(r,r+o),i=new Array(c.length),s=0;s<c.length;s++)i[s]=c.charCodeAt(s);var l=new Uint8Array(i);n.push(l)}var u=new Blob(n,{type:e});return u}var hovering=!1,customwallpaper,search,countdowntimer,lightfonts,date=new Date;date=date.getDate()+"/"+(date.getMonth()+1)+"/"+date.getFullYear();var canvas=document.createElement("canvas");canvas.width=1920,canvas.height=1080,document.body.appendChild(canvas);var context=canvas.getContext("2d"),count=0,counter=null,cancelCounter=null,audio=document.getElementById("buzzer");$(function(){$(document).click(function(){popout()}),$(".popout").click(function(t){t.stopPropagation()})}),$(function(){function t(){1==localStorage.getItem("customwallpaper")?(customwallpaper=1,$("#btn-customwallpaper").show(),$("#add-customwallpaper img").attr("src","img/check.svg")):(customwallpaper=0,$("#btn-customwallpaper").hide(),$("#add-customwallpaper img").attr("src","img/uncheck.svg"))}function e(){1==localStorage.getItem("search")?(search=1,$(".search").fadeIn(),$("#add-search img").attr("src","img/check.svg"),$("#query").focus()):(search=0,$(".search").fadeOut(),$("#add-search img").attr("src","img/uncheck.svg"))}function o(){1==localStorage.getItem("countdowntimer")?(countdowntimer=1,$("#btn-countdowntimer").show(),$("#add-countdowntimer img").attr("src","img/check.svg")):(countdowntimer=0,$("#btn-countdowntimer").hide(),$("#add-countdowntimer img").attr("src","img/uncheck.svg"))}function a(){1==localStorage.getItem("lightfonts")?(lightfonts=1,$("body").addClass("light"),$("#add-lightfonts img").attr("src","img/check.svg")):(lightfonts=0,$("body").removeClass("light"),$("#add-lightfonts img").attr("src","img/uncheck.svg"))}$(document).mousemove(function(){$(".menu").addClass("active"),lastTimeMouseMoved=(new Date).getTime();var t=setTimeout(function(){var t=(new Date).getTime();hovering||$(".popout").hasClass("active")||t-lastTimeMouseMoved>1e3&&$(".menu").removeClass("active")},1e3)}),$(".icon img").each(function(){var t=$(this),e=t.attr("id"),o=t.attr("class"),a=t.attr("src");$.get(a,function(a){var n=$(a).find("svg");"undefined"!=typeof e&&(n=n.attr("id",e)),"undefined"!=typeof o&&(n=n.attr("class",o+" replaced-svg")),n=n.removeAttr("xmlns:a"),t.replaceWith(n)},"xml")}),$(".icon").hover(function(){hovering=!0},function(){hovering=!1}),$(".icon").click(function(t){t.stopPropagation()}),$("#btn-addons").click(function(t){popout("addons"),t.preventDefault()}),$("#btn-about").click(function(t){popout("about"),t.preventDefault()}),$("#add-customwallpaper").click(function(e){0===customwallpaper?localStorage.setItem("customwallpaper",1):localStorage.setItem("customwallpaper",0),t(),e.preventDefault()}),t(),$("#add-search").click(function(t){0===search?localStorage.setItem("search",1):localStorage.setItem("search",0),e(),t.preventDefault()}),e(),$("#add-countdowntimer").click(function(t){0===countdowntimer?localStorage.setItem("countdowntimer",1):localStorage.setItem("countdowntimer",0),o(),t.preventDefault()}),o(),$("#add-lightfonts").click(function(t){0===lightfonts?localStorage.setItem("lightfonts",1):localStorage.setItem("lightfonts",0),a(),t.preventDefault()}),a()}),$(function(){function t(){if(1==localStorage.getItem("customwallpaper")&&null!=localStorage.getItem("customwallpaperurl")&&""!=localStorage.getItem("customwallpaperurl")){var t=localStorage.getItem("customwallpaperurl");$("body").css("background-image","url("+t+")"),$("#input-customwallpaper").val(t)}else{var e;if(null===localStorage.getItem(date)){var o=new Image;o.crossOrigin="";var a=1e4*Math.random();o.src="https://unsplash.it/1920/1080/?random&element=body&version="+a;var n=0;o.onload=function(){var t=document.createElement("canvas");t.width=1920,t.height=1080,document.body.appendChild(t);var a=t.getContext("2d");a.drawImage(o,0,0);for(var r=a.getImageData(0,0,t.width,t.height),c=r.data,i,s,l,u,m=0,d=c.length;d>m;m+=4)i=c[m],s=c[m+1],l=c[m+2],u=Math.floor((i+s+l)/3),n+=u;var p=Math.floor(n/(this.width*this.height));p>150?$("body").addClass("black"):$("body").removeClass("black"),e=t.toDataURL("image/jpeg");var w=e.replace(/^data:image\/jpeg;base64,/,"");localStorage.setItem(date,w);var g=b64toBlob(w,"image/jpeg"),h=URL.createObjectURL(g);$("body").css("background-image","url("+h+")"),$("#btn-refresh").delay(1e3).removeClass("rotating")}}else{var o=new Image,r=localStorage.getItem(date);o.src="data:image/jpeg;base64,"+r;var c=b64toBlob(r,"image/jpeg"),i=URL.createObjectURL(c),n=0;o.onload=function(){canvas=document.getElementsByTagName("canvas")[0],context.drawImage(o,0,0);for(var t=context.getImageData(0,0,canvas.width,canvas.height),e=t.data,a,r,c,s,l=0,u=e.length;u>l;l+=4)a=e[l],r=e[l+1],c=e[l+2],s=Math.floor((a+r+c)/3),n+=s;var m=Math.floor(n/(this.width*this.height));m>150?$("body").addClass("black"):$("body").removeClass("black"),$("body").css("background-image","url("+i+")")}}}}t(),$("#btn-refresh").click(function(e){localStorage.setItem("customwallpaper",0),customwallpaper=0,localStorage.removeItem(date),$(this).addClass("rotating"),t(),e.preventDefault()}),$("#btn-customwallpaper").click(function(t){popout("customwallpaper"),$("#input-customwallpaper").focus(),t.preventDefault()}),$("#input-customwallpaper").keypress(function(e){13==e.keyCode&&(localStorage.setItem("customwallpaperurl",$(this).val()),t(),popout())})}),$(function(){function t(){if(null===counter){var t=new Date,o=t.getHours(),a=t.getMinutes();0===e?(o%=12,o=o?o:12,o=0===o?"0"+o:o):o>12&&(o%=24,o=9>o?"0"+o:o),a=10>a?"0"+a:a;var n=o+":"+a;$(".clock h1").text(n),$(".widget.clock").fadeIn(1e3)}}var e;e=1==localStorage.getItem("military")?1:0,t(),window.setInterval(t,100);var o={weekday:"long",year:"numeric",month:"long",day:"numeric"};$(".date h2").text((new Date).toLocaleDateString("en-GB",o)),$(".widget.date").fadeIn(1e3),$("#btn-clock").click(function(o){$(".widget.clock").stop(!0,!0).hide().fadeIn(500),1===e?(localStorage.setItem("military",0),e=0):(localStorage.setItem("military",1),e=1),t(),o.preventDefault()})}),$(function(){function t(t){if("google"===t)return"https://google.com";if("facebook"===t)return"https://www.facebook.com";if("youtube"===t)return"https://www.youtube.com";if("yahoo"===t)return"https://yahoo.com";if("wiki"===t||"wikipedia"===t)return"http://wikipedia.org";if("twitter"===t)return"https://twitter.com";if("bing"===t)return"https://bing.com";if("pinterest"===t)return"https://www.pinterest.com";if("reddit"===t)return"https://www.reddit.com";if("wordpress"===t)return"https://wordpress.com";if("instagram"===t)return"https://instagram.com";if("tumblr"===t)return"https://www.tumblr.com";if("paypal"===t)return"https://www.paypal.com";if("imgur"===t)return"https://imgur.com";if("apple"===t)return"https://www.apple.com";if("microsoft"===t)return"https://www.microsoft.com";if("imdb"===t)return"https://www.imdb.com";if("stack overflow"===t)return"https://stackoverflow.com";if("craigslist"===t)return"http://craigslist.com";if("netflix"===t)return"https://www.netflix.com";if("bbc"===t)return"http://www.bbc.co.uk";if("cnn"===t)return"http://cnn.com";if("dropbox"===t)return"https://www.dropbox.com";if("github"===t)return"https://github.com";if("gmail"===t)return"http://mail.google.com";if("flickr"===t)return"https://www.flickr.com";if("yelp"===t)return"http://www.yelp.com";if("godaddy"===t)return"https://www.godaddy.com";if("vimeo"===t)return"https://vimeo.com";if("etsy"===t)return"https://www.etsy.com";if("cnet"===t)return"http://cnet.com";if("slideshare"===t)return"http://www.slideshare.com";if("deviantart"===t)return"http://www.deviantart.com";if("forbes"===t)return"http://www.forbes.com";if("twitch"===t)return"http://www.twitch.tv";if("soundcloud"===t)return"https://soundcloud.com";if("quora"===t)return"https://www.quora.com";if("mailchimp"===t)return"http://mailchimp.com";if("9gag"===t)return"http://9gag.com";if("lifehacker"===t)return"http://www.lifehacker.com";if("fiverr"===t)return"https://www.fiverr.com";if("gizmodo"===t)return"http://www.gizmodo.com";if("trello"===t)return"https://trello.com";if("evernote"===t)return"https://evernote.com";if("kickstarter"===t)return"https://www.kickstarter.com";if("outlook"===t)return"https://outlook.com";if("xe"===t)return"http://www.xe.com";var e=new RegExp(" ","g");return t=t.replace(e,"+"),"https://google.com/search?q="+t}$("#query").val="",$("#query").keypress(function(e){13===e.keyCode&&(window.location=t($(this).val()))})}),$(function(){function t(){if(minutes=60*$("#input-minutes").val(),seconds=$("#input-seconds").val(),0===minutes.length)minutes=0;else{if(isNaN(minutes))return void $("#countdown .error").text("Must be a number").show();minutes=+minutes}if(0===seconds.length)seconds=0;else{if(isNaN(seconds))return void $("#countdown .error").text("Must be a number").show();seconds=+seconds}minutes>1440&&seconds>86400?$("#countdown .error").text("Cannot countdown over 24 hours").show():minutes<0||seconds<0?$("#countdown .error").text("Number must be positive").show():($("#countdown .error").hide(),window.clearTimeout(cancelCounter),count=minutes+seconds,e(),$("#btn-countdowntimer").addClass("rotating"),popout())}function e(){o(),counter=window.setInterval(a,1e3)}function o(){window.clearInterval(counter),counter=null,$(".clock h1").removeClass("flashing"),$("#countdown-stop").removeClass("active"),$("#btn-countdowntimer").removeClass("rotating"),audio.pause()}function a(){if($("#countdown-stop").addClass("active"),count-=1,0>=count)return window.clearInterval(counter),audio.currentTime=0,audio.play(),$(".clock h1").text("00:00").addClass("flashing"),void(cancelCounter=window.setTimeout(o,5700));var t=Math.floor(count%31536e3%86400/3600),e=Math.floor(count%31536e3%86400%3600/60),a=count%31536e3%86400%3600%60;10>t&&(t="0"+t),10>e&&(e="0"+e),10>a&&(a="0"+a),$(".clock h1").text("00"===t?e+":"+a:t+":"+e+":"+a)}$("#btn-countdowntimer").click(function(t){popout("countdown"),$("#input-minutes").focus(),t.preventDefault()}),$("#countdown-stop").click(function(t){o(),t.preventDefault()}),$("#input-minutes").keypress(function(e){13===e.keyCode&&t(e.keyCode)}),$("#input-seconds").keypress(function(e){13===e.keyCode&&t(e.keyCode)})});